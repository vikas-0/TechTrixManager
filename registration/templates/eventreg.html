{% extends 'base.html' %}
{% block title %}Event Registration{% endblock %}

 {% block navrightitem %}
<li><a><i class="fa fa-inr"></i>&nbsp;{{money}}</a></li>
<li><a><span class="glyphicon glyphicon-user"></span>&nbsp;{{user}}</a></li>
                {% endblock %}
{% block body %}
{% load staticfiles %}
    <script src="{% static 'site/js/bootstrap-tagsinput.js' %}"></script>
    <script src="{% static 'site/js/select2.full.min.js' %}"></script>
        <link rel="stylesheet" href="{% static 'site/css/bootstrap-tagsinput.css' %}">
        <link rel="stylesheet" href="{% static 'site/css/font-awesome.min.css' %}">
        <link rel="stylesheet" href="{% static 'site/css/select2.min.css' %}">
<form class="form-horizontal" method="POST" action="{% url 'registration:eventreg'%}">
          {% csrf_token %}
  <fieldset style="margin:2em">

      {% for field in form %}
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <span class="text-danger small">{{ field.errors }}</span>
        </div>
        <label class="control-label col-sm-2">{{ field.label_tag }}</label>
        <div class="col-sm-10">{{ field }}</div>
    </div>
{% endfor %}

    <div class="form-group">


      <div class="col-lg-10 col-lg-offset-2">

        <input type="submit" name="register" class="btn btn-primary" value="Register">
      </div>
    </div>
  </fieldset>
</form>

 <script>
var elt = $('#id_participants');
elt.tagsinput({
  trimValue: true,
  confirmKeys: [13, 44,32, 188]
});

elt.on('itemAdded', function(event) {
$.ajax({
  url: 'http://localhost/reg/candidate/?id='.concat(event.item),
  dataType: 'json',
  success: function(data){
      $("span.tag:contains("+event.item+")").removeClass("label-info",1000,"easeInBack");
    if(data.resp){
    $("span.tag:contains("+event.item+")").addClass('label-success');
    }
    else{
      $("span.tag:contains("+event.item+")").addClass('label-danger');
    }
  }
});
});

$(document).ready(function() {
  $("#id_event").select2();
});

</script>
{% endblock %}